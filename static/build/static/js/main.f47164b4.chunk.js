(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{171:function(e,t,a){e.exports=a(365)},180:function(e,t,a){},365:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),r=a(7),o=a.n(r),l=a(376),u=a(378),i=(a(176),a(178),a(180),a(377)),m=a(374),s=a(367),d=a(28),f=a(309),E=a(47),g=a(56),h=a.n(g),p="api/v1",v={get:function(){return h.a.get("".concat(p,"/cats")).then(function(e){return e.data})},install:function(){return h.a.post("".concat(p,"/cats/install"))},getAllOrdered:function(){return h.a.get("".concat(p,"/cats/all/ordered")).then(function(e){return e.data.cats})}},b={post:function(e){return h.a.post("".concat(p,"/vote"),e)}},O={getCount:function(){return h.a.get("".concat(p,"/count")).then(function(e){return e.data})}},j=a(373),y=a(368),k=a(369),w=function(e){var t=e.submit,a=e.loading,r=e.cats,o=Object(n.useState)(!0),l=Object(d.a)(o,2),u=l[0],i=l[1],m=Object(n.useState)(),f=Object(d.a)(m,2),E=f[0],g=f[1],h=r.cat1,p=r.cat2,v=function(e,t){var a=t.value;g(a)};Object(n.useEffect)(function(){return i(!E)},E);var b={span:12,align:"center"};return c.a.createElement(j.a,{loading:a,className:"hiddenRadio",onSubmit:function(){t({cat1:{id:h.id,voted:"1"===E},cat2:{id:p.id,voted:"2"===E}})}},c.a.createElement(y.a,null,c.a.createElement(k.a,b,c.a.createElement(j.a.Item,null,c.a.createElement("input",{id:"cat1",type:"radio",name:"radioGroup",value:"1",className:"input-hidden",checked:"1"===E,onChange:function(e){return v(0,e.target)}}),c.a.createElement("label",{htmlFor:"cat1"},c.a.createElement("img",{src:h.image,alt:"cat1"})))),c.a.createElement(k.a,b,c.a.createElement(j.a.Item,null,c.a.createElement("input",{id:"cat2",type:"radio",name:"radioGroup",value:"2",className:"input-hidden",checked:"2"===E,onChange:function(e){return v(0,e.target)}}),c.a.createElement("label",{htmlFor:"cat2"},c.a.createElement("img",{src:p.image,alt:"cat2"}))))),c.a.createElement(s.a,{type:"primary",htmlType:"submit",disabled:u},"Soumettre le choix"))},I=function(){var e=Object(n.useState)(0),t=Object(d.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)(function(){O.getCount().then(function(e){return r(e.total)}).catch()},[]),c.a.createElement("div",null,"Nombre de votes : ",a)},S=function(){var e=Object(n.useState)(!0),t=Object(d.a)(e,2),a=t[0],r=t[1],o=Object(n.useState)({cat1:{id:0,image:""},cat2:{id:0,image:""}}),l=Object(d.a)(o,2),u=l[0],i=l[1],m=function(){r(!0),v.get().then(function(e){i({cat1:{id:e.cat1.ID,image:e.cat1.image},cat2:{id:e.cat2.ID,image:e.cat2.image}}),r(!1)}).catch(function(){return E.toast.error("un probl\xe9me est survenu avec le serveur")})};return Object(n.useEffect)(m,[]),c.a.createElement("div",null,c.a.createElement(E.ToastContainer,null),"HomePage",a?c.a.createElement(f.a,{tip:"Chargement..."}):c.a.createElement(w,{submit:function(e){r(!0),b.post(e).then(function(){return m()}).catch(function(e){return E.toast.error(e)})},loading:a,cats:u}),c.a.createElement(I,null))},C=a(370),x=a(372),N=[{title:"Image",key:"image",dataIndex:"image",render:function(e){return c.a.createElement(C.a,{shape:"square",size:64,src:e})},align:"center"},{title:"Nombre de votes",dataIndex:"votes",key:"votes"},{title:"Rating",dataIndex:"rating",key:"rating"}],D=function(){var e=Object(n.useState)([]),t=Object(d.a)(e,2),a=t[0],r=t[1],o=Object(n.useState)(!1),l=Object(d.a)(o,2),u=l[0],i=l[1];return Object(n.useEffect)(function(){i(!0),v.getAllOrdered().then(function(e){i(!1),r(e)}).catch(function(){return E.toast.error("un probleme est survenu avec le serveur")})},[]),c.a.createElement("div",null,c.a.createElement(E.ToastContainer,null),"ResultPage",c.a.createElement(x.a,{rowKey:function(e){return e.ID},key:function(e){return e.ID},loading:u,dataSource:a,columns:N}))},F=a(375),R=function(){return c.a.createElement(F.a,{to:"/"})},H=a(366),T=a(371),z=function(){return c.a.createElement(H.a,{theme:"dark",mode:"horizontal",defaultSelectedKeys:["2"],style:{lineHeight:"64px"}},c.a.createElement(H.a.Item,{key:"1"},c.a.createElement(T.a,{to:"/"},"Vote")),c.a.createElement(H.a.Item,{key:"2"},c.a.createElement(T.a,{to:"/results"},"Resultats")))},A=function(){return c.a.createElement("div",null,"Footer")},B=m.a.Header,G=m.a.Content,J=m.a.Footer,K=function(e){var t=e.location;return c.a.createElement(m.a,null,c.a.createElement(B,null,c.a.createElement(z,{location:t})),c.a.createElement(s.a,{onClick:function(){return v.install()}},"Cats"),c.a.createElement(G,null,c.a.createElement(i.a,null,c.a.createElement(u.a,{location:t,path:"/",exact:!0,component:S}),c.a.createElement(u.a,{location:t,path:"/results",exact:!0,component:D}),c.a.createElement(u.a,{path:"*",component:R}))),c.a.createElement(J,null,c.a.createElement(A,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(l.a,null,c.a.createElement(u.a,{component:K})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[171,2,1]]]);
//# sourceMappingURL=main.f47164b4.chunk.js.map